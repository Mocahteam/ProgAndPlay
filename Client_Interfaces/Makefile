
.PHONY: all clean

# Build Prog&Play for Scratch only on Window
ifeq ($(OS),Windows_NT)
BUILD_SCRATCH = compile_scratch
else
BUILD_SCRATCH = do_not_compile_scratch
endif

all: compile_c compile_java compile_compalgo compile_ocaml compile_ada compile_python $(BUILD_SCRATCH)

compile_c:
	@echo ""
	@echo "-------------------------------------------------------------------------------"
	@echo "| C interface (MAKE)                                                          |"
	@echo "-------------------------------------------------------------------------------"
	@(cd ./c-cpp && $(MAKE))
	@echo ""
	@echo "-------------------------------------------------------------------------------"
	@echo "| C interface (MAKE INSTALL)                                                  |"
	@echo "-------------------------------------------------------------------------------"
	@(cd ./c-cpp && $(MAKE) install)
	@echo ""
	@echo "-------------------------------------------------------------------------------"
	@echo "| C interface (MAKE EXEMPLES)                                                  |"
	@echo "-------------------------------------------------------------------------------"
	@(cd ./c-cpp/exemple && $(MAKE))

compile_java:
	@echo ""
	@echo "-------------------------------------------------------------------------------"
	@echo "| Java interface (MAKE)                                                       |"
	@echo "-------------------------------------------------------------------------------"
	@(cd ./java && $(MAKE))
	@echo ""
	@echo "-------------------------------------------------------------------------------"
	@echo "| Java interface (MAKE INSTALL)                                               |"
	@echo "-------------------------------------------------------------------------------"
	@(cd ./java && $(MAKE) install)
	@echo ""
	@echo "-------------------------------------------------------------------------------"
	@echo "| Java interface (BUILD JAVA DOC)                                             |"
	@echo "-------------------------------------------------------------------------------"
	@(cd ./java && $(MAKE) doc)
	@echo ""
	@echo "-------------------------------------------------------------------------------"
	@echo "| Java interface (MAKE EXEMPLES)                                              |"
	@echo "-------------------------------------------------------------------------------"
	@(cd ./java && $(MAKE) exemples)

compile_compalgo:
	@echo ""
	@echo "-------------------------------------------------------------------------------"
	@echo "| Compalgo interface (MAKE)                                                   |"
	@echo "-------------------------------------------------------------------------------"
	@(cd ./compalgo && $(MAKE))

compile_ocaml:
	@echo ""
	@echo "-------------------------------------------------------------------------------"
	@echo "| OCaml interface (MAKE)                                                      |"
	@echo "-------------------------------------------------------------------------------"
	@(cd ./ocaml && $(MAKE))

compile_ada:
	@echo ""
	@echo "-------------------------------------------------------------------------------"
	@echo "| Ada interface (MAKE)                                                        |"
	@echo "-------------------------------------------------------------------------------"
	@(cd ./ada && $(MAKE))
	@echo ""
	@echo "-------------------------------------------------------------------------------"
	@echo "| Ada interface (MAKE INSTALL)                                                |"
	@echo "-------------------------------------------------------------------------------"
	@(cd ./ada && $(MAKE) install)
	@echo ""
	@echo "-------------------------------------------------------------------------------"
	@echo "| Ada interface (MAKE EXEMPLES)                                               |"
	@echo "-------------------------------------------------------------------------------"
	@(cd ./ada/exemples && $(MAKE))

compile_python:
	@echo ""
	@echo "-------------------------------------------------------------------------------"
	@echo "| Python interface (MAKE)                                                     |"
	@echo "-------------------------------------------------------------------------------"
	@(cd ./python && $(MAKE))
	@echo ""
	@echo "-------------------------------------------------------------------------------"
	@echo "| Python interface (MAKE INSTALL)                                             |"
	@echo "-------------------------------------------------------------------------------"
	@(cd ./python && $(MAKE) install)

compile_scratch:
	@echo ""
	@echo "-------------------------------------------------------------------------------"
	@echo "| Scratch 2.0 interface (MAKE)                                                |"
	@echo "-------------------------------------------------------------------------------"
	@(cd ./scratch2.0/ProgAndPlayANE/lib/exportANE && $(MAKE))
	@echo ""
	@echo "-------------------------------------------------------------------------------"
	@echo "| Scratch 2.0 interface (MAKE INSTALL)                                        |"
	@echo "-------------------------------------------------------------------------------"
	@(cd ./scratch2.0/ProgAndPlayANE/lib/exportANE && $(MAKE) install)

do_not_compile_scratch:
	@echo ""
	@echo "-------------------------------------------------------------------------------"
	@echo "| Scratch 2.0 interface (MAKE)                                                |"
	@echo "-------------------------------------------------------------------------------"
	@echo "Only available on Window"

clean:
	@echo "C interface cleaning -------------------------------------------\
--------------"
	@(cd ./c-cpp && $(MAKE) $@)
	@echo "Java interface cleaning ----------------------------------------\
--------------"
	@(cd ./java && $(MAKE) $@)
	@echo "Compalgo interface cleaning ------------------------------------\
--------------"
	@(cd ./compalgo && $(MAKE) $@)
	@echo "OCaml interface cleaning ---------------------------------------\
--------------"
	@(cd ./ocaml && $(MAKE) $@)
	@echo "Ada interface cleaning -----------------------------------------\
--------------"
	@(cd ./ada && $(MAKE) $@)
	@echo "Python interface cleaning -----------------------------------------\
--------------"
	@(cd ./python && $(MAKE) $@)
	@echo "Scratch interface cleaning -------------------------------------\
--------------"
	@(cd ./scratch2.0/ProgAndPlayANE/lib/exportANE && $(MAKE) $@)
